"use strict";
var _watch = _interopRequireDefault(require("./watch"));
var _defaults = require("./defaults");
var _statusCodes = require("./statusCodes");
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function createLiveReloadHandler(watchPattern, param) {
    var quietly = param === void 0 ? _defaults.DEFAULT_QUIETLY : param;
    var statusCode = _statusCodes.OK_200_STATUS_CODE, registerHandler = (0, _watch).default(watchPattern, quietly);
    return function liveReloadHandler(request, response) {
        var connection = response.connection;
        response.writeHead(statusCode);
        connection.setTimeout(0);
        registerHandler(function() {
            response.end();
        });
    };
}
module.exports = createLiveReloadHandler;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVMaXZlUmVsb2FkSGFuZGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHdhdGNoIGZyb20gXCIuL3dhdGNoXCI7XG5cbmltcG9ydCB7IERFRkFVTFRfUVVJRVRMWSB9IGZyb20gXCIuL2RlZmF1bHRzXCI7XG5pbXBvcnQgeyBPS18yMDBfU1RBVFVTX0NPREUgfSBmcm9tIFwiLi9zdGF0dXNDb2Rlc1wiO1xuXG5mdW5jdGlvbiBjcmVhdGVMaXZlUmVsb2FkSGFuZGxlcih3YXRjaFBhdHRlcm4sIHF1aWV0bHkgPSBERUZBVUxUX1FVSUVUTFkpIHtcbiAgY29uc3Qgc3RhdHVzQ29kZSA9IE9LXzIwMF9TVEFUVVNfQ09ERSxcbiAgICAgICAgcmVnaXN0ZXJIYW5kbGVyID0gd2F0Y2god2F0Y2hQYXR0ZXJuLCBxdWlldGx5KTtcblxuICByZXR1cm4gZnVuY3Rpb24gbGl2ZVJlbG9hZEhhbmRsZXIocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBjb25zdCB7IGNvbm5lY3Rpb24gfSA9IHJlc3BvbnNlO1xuXG4gICAgcmVzcG9uc2Uud3JpdGVIZWFkKHN0YXR1c0NvZGUpO1xuXG4gICAgY29ubmVjdGlvbi5zZXRUaW1lb3V0KDApO1xuXG4gICAgcmVnaXN0ZXJIYW5kbGVyKCgpID0+IHtcbiAgICAgIHJlc3BvbnNlLmVuZCgpO1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXI7XG4iXSwibmFtZXMiOlsiY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXIiLCJ3YXRjaFBhdHRlcm4iLCJxdWlldGx5Iiwic3RhdHVzQ29kZSIsInJlZ2lzdGVySGFuZGxlciIsImxpdmVSZWxvYWRIYW5kbGVyIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiY29ubmVjdGlvbiIsIndyaXRlSGVhZCIsInNldFRpbWVvdXQiLCJlbmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxDQUFZO0FBRU0sR0FBUyxDQUFULE1BQVM7QUFFSyxHQUFZLENBQVosU0FBWTtBQUNULEdBQWUsQ0FBZixZQUFlOzs7Ozs7U0FFekNBLHVCQUF1QixDQUFDQyxZQUFZLEVBQUVDLEtBQXlCLEVBQUUsQ0FBQztRQUE1QkEsT0FBTyxHQUFQQSxLQUF5QixjQUh4QyxTQUFZLG1CQUdHQSxLQUF5QjtJQUN0RSxHQUFLLENBQUNDLFVBQVUsR0FIaUIsWUFBZSxxQkFJMUNDLGVBQWUsT0FQTCxNQUFTLFVBT0tILFlBQVksRUFBRUMsT0FBTztJQUVuRCxNQUFNLENBQUMsUUFBUSxDQUFDRyxpQkFBaUIsQ0FBQ0MsT0FBTyxFQUFFQyxRQUFRLEVBQUUsQ0FBQztRQUNwRCxHQUFLLENBQUdDLFVBQVUsR0FBS0QsUUFBUSxDQUF2QkMsVUFBVTtRQUVsQkQsUUFBUSxDQUFDRSxTQUFTLENBQUNOLFVBQVU7UUFFN0JLLFVBQVUsQ0FBQ0UsVUFBVSxDQUFDLENBQUM7UUFFdkJOLGVBQWUsQ0FBQyxRQUNwQixHQUQwQixDQUFDO1lBQ3JCRyxRQUFRLENBQUNJLEdBQUc7UUFDZCxDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdiLHVCQUF1QiJ9