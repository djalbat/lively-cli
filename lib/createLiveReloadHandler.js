"use strict";
var _watch = _interopRequireDefault(require("./watch"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var ref = require("./defaults"), DEFAULT_QUIETLY = ref.DEFAULT_QUIETLY, ref1 = require("./statusCodes"), OK_200_STATUS_CODE = ref1.OK_200_STATUS_CODE;
function createLiveReloadHandler(watchPattern, param) {
    var quietly = param === void 0 ? DEFAULT_QUIETLY : param;
    var statusCode = OK_200_STATUS_CODE, registerHandler = (0, _watch).default(watchPattern, quietly);
    return function liveReloadHandler(request, response) {
        var connection = response.connection;
        response.writeHead(statusCode);
        connection.setTimeout(0);
        registerHandler(function() {
            response.end();
        });
    };
}
module.exports = createLiveReloadHandler;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVMaXZlUmVsb2FkSGFuZGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHdhdGNoIGZyb20gXCIuL3dhdGNoXCI7XG5cbmNvbnN0IHsgREVGQVVMVF9RVUlFVExZIH0gPSByZXF1aXJlKFwiLi9kZWZhdWx0c1wiKSxcbiAgICAgIHsgT0tfMjAwX1NUQVRVU19DT0RFIH0gPSByZXF1aXJlKFwiLi9zdGF0dXNDb2Rlc1wiKTtcblxuZnVuY3Rpb24gY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXIod2F0Y2hQYXR0ZXJuLCBxdWlldGx5ID0gREVGQVVMVF9RVUlFVExZKSB7XG4gIGNvbnN0IHN0YXR1c0NvZGUgPSBPS18yMDBfU1RBVFVTX0NPREUsXG4gICAgICAgIHJlZ2lzdGVySGFuZGxlciA9IHdhdGNoKHdhdGNoUGF0dGVybiwgcXVpZXRseSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGxpdmVSZWxvYWRIYW5kbGVyKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgY29uc3QgeyBjb25uZWN0aW9uIH0gPSByZXNwb25zZTtcblxuICAgIHJlc3BvbnNlLndyaXRlSGVhZChzdGF0dXNDb2RlKTtcblxuICAgIGNvbm5lY3Rpb24uc2V0VGltZW91dCgwKTtcblxuICAgIHJlZ2lzdGVySGFuZGxlcigoKSA9PiB7XG4gICAgICByZXNwb25zZS5lbmQoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUxpdmVSZWxvYWRIYW5kbGVyO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFVBQVk7QUFFTSxHQUFTLENBQVQsTUFBUzs7Ozs7O0FBRTNCLEdBQUssQ0FBdUIsR0FBcUIsR0FBckIsT0FBTyxFQUFDLFVBQVksSUFBeEMsZUFBZSxHQUFLLEdBQXFCLENBQXpDLGVBQWUsRUFDUSxJQUF3QixHQUF4QixPQUFPLEVBQUMsYUFBZSxJQUE5QyxrQkFBa0IsR0FBSyxJQUF3QixDQUEvQyxrQkFBa0I7U0FFakIsdUJBQXVCLENBQUMsWUFBWSxFQUFFLEtBQXlCLEVBQUUsQ0FBQztRQUE1QixPQUFPLEdBQVAsS0FBeUIsY0FBZixlQUFlLEdBQXpCLEtBQXlCO0lBQ3RFLEdBQUssQ0FBQyxVQUFVLEdBQUcsa0JBQWtCLEVBQy9CLGVBQWUsT0FQTCxNQUFTLFVBT0ssWUFBWSxFQUFFLE9BQU87b0JBRW5DLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsQ0FBQztRQUNwRCxHQUFLLENBQUcsVUFBVSxHQUFLLFFBQVEsQ0FBdkIsVUFBVTtRQUVsQixRQUFRLENBQUMsU0FBUyxDQUFDLFVBQVU7UUFFN0IsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRXZCLGVBQWUsWUFBTyxDQUFDO1lBQ3JCLFFBQVEsQ0FBQyxHQUFHO1FBQ2QsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDO0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyx1QkFBdUIifQ==